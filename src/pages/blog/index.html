---
layout: layout.html
pageCss: /pages/blog/page.css

pagination:
  data: locales.list
  size: 1
  alias: lang

permalink: "{% if lang == locales.default %}/blog/{% else %}/{{ lang }}/blog/{% endif %}"

lang: "{{ lang }}"
pageTitle: "blog"
---

{% set t = (i18n.main[lang] if i18n and i18n.main and i18n.main[lang] else {}) %}
{% set posts = (collections.postsByLang[lang] if collections.postsByLang and collections.postsByLang[lang] else []) %}

{# Featured: first post with featured:true, otherwise newest.
   Avoid non-standard filters (selectattr/first) for maximum compatibility. #}
{% set featured = posts[0] if posts and posts.length else null %}
{% set featuredPicked = false %}
{% if posts and posts.length %}
    {% for p in posts %}
        {% if not featuredPicked and p and p.data and p.data.featured %}
            {% set featured = p %}
            {% set featuredPicked = true %}
        {% endif %}
    {% endfor %}
{% endif %}

<main>
    <section class="blog">
        <div class="blog__container">
            <div class="blog__top">
                <div class="blog__top-header">
                    <p class="text-16 blog__label">(BLOG)</p>
                    <h1 class="text-140 blog__title">LATEST INSIGHTS</h1>
                </div>

                {% if featured %}
                    <div class="blog__featured">
                        <div class="blog__featured-item">
                            <a href="{{ featured.url }}" class="blog__featured-link lm-hover" data-lm="VIEW BLOG">
                                <div class="blog__featured-card">
                                    <div class="text-14 blog__category">{{ featured.data.category or "—" }}</div>

                                    <div class="blog__image">
                                        {% if featured.data.cover %}
                                            <img src="{{ featured.data.cover }}" alt="" class="blog__image-el">
                                        {% endif %}
                                        <div class="blog__image-bg"></div>
                                    </div>

                                    <div class="blog__meta">
                                        <p class="text-14 blog__date">
                                            {{ featured.data.dateText or "—" }}
                                        </p>

                                        <h3 class="blog__featured-title">
                                            {{ featured.data.title }}
                                        </h3>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                {% endif %}
            </div>

            <div class="blog__list">
                {% for p in posts %}
                    {% if not (featured and p.url == featured.url) %}
                        <a href="{{ p.url }}" class="blog__post-link lm-hover" data-lm="VIEW BLOG">
                            <div class="blog__post">
                                <div class="text-14 blog__post-category">{{ p.data.category or "—" }}</div>

                                {% if p.data.cover %}
                                    <div class="blog__post-image">
                                        <img src="{{ p.data.cover }}" alt="blog img" class="blog__post-image-el">
                                    </div>
                                {% endif %}

                                <div class="blog__post-meta">
                                    <p class="text-14 blog__post-date">
                                        {{ p.data.dateText or "—" }}
                                    </p>

                                    <div class="blog__post-content">
                                        <h4 class="text-24 blog__post-title">
                                            {{ p.data.title }}
                                        </h4>
                                        {% if p.data.excerpt %}
                                            <p class="text-16 blog__post-excerpt">
                                                {{ p.data.excerpt }}
                                            </p>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                        </a>
                    {% endif %}
                {% endfor %}
            </div>
        </div>
    </section>
    {% include "components/work_together.html" %}
</main>

<script src="/js/blog/blog.js"></script>